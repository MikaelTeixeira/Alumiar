{% load static %}
<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Prontuários - Psicólogo | Alumiar</title>

    <link rel="stylesheet" href="{% static 'users/css/psychologist-record.css' %}">
</head>
<body>
    <div class="sidebar" id="sidebar">
        <div class="sidebar-header">
            <h1 class="logo">ALUMIAR</h1>
            <button class="close-sidebar" id="closeSidebar">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <line x1="18" y1="6" x2="6" y2="18"></line>
                    <line x1="6" y1="6" x2="18" y2="18"></line>
                </svg>
            </button>
        </div>

        <nav class="sidebar-nav">
            <a href="psychologist-dashboard.html" class="nav-item">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <rect x="3" y="3" width="7" height="7"></rect>
                    <rect x="14" y="3" width="7" height="7"></rect>
                    <rect x="14" y="14" width="7" height="7"></rect>
                    <rect x="3" y="14" width="7" height="7"></rect>
                </svg>
                <span>Dashboard</span>
            </a>

            <a href="psychologist-schedule.html" class="nav-item">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect>
                    <line x1="16" y1="2" x2="16" y2="6"></line>
                    <line x1="8" y1="2" x2="8" y2="6"></line>
                    <line x1="3" y1="10" x2="21" y2="10"></line>
                </svg>
                <span>Agenda</span>
            </a>

            <a href="#" class="nav-item">
                <svg width="20" height="20" ...></svg>
                <span>Pacientes</span>
            </a>

            <a href="#" class="nav-item active">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path>
                    <polyline points="14 2 14 8 20 8"></polyline>
                    <line x1="16" y1="13" x2="8" y2="13"></line>
                    <line x1="16" y1="17" x2="8" y2="17"></line>
                    <polyline points="10 9 9 9 8 9"></polyline>
                </svg>
                <span>Prontuários</span>
            </a>

            <a href="psychologist-history.html" class="nav-item">
                <svg width="20" height="20" viewBox="0 0 24 24" ...></svg>
                <span>Histórico</span>
            </a>

            <a href="#" class="nav-item">
                <svg width="20" height="20" ...></svg>
                <span>Mensagens</span>
            </a>

            <a href="#" class="nav-item">
                <svg width="20" height="20" ...></svg>
                <span>Configurações</span>
            </a>
        </nav>
    </div>

    <div class="main-content">
        <header class="header">
            <button class="menu-toggle desktop-only" id="menuToggle">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <line x1="3" y1="12" x2="21" y2="12"></line>
                    <line x1="3" y1="6" x2="21" y2="6"></line>
                    <line x1="3" y1="18" x2="21" y2="18"></line>
                </svg>
            </button>

            <div class="header-title">
                <h2>Prontuários</h2>
                <p>Gerencie os prontuários dos seus pacientes</p>
            </div>

            <div class="header-actions">
                <button class="notification-btn" id="notificationBtn">
                    <svg width="20" height="20" ...></svg>
                    <span class="notification-badge">3</span>
                </button>

                <div class="user-profile">
                    <img src="https://ui-avatars.com/api/?name=Dr+Silva&background=2563A8&color=fff" alt="Perfil">
                    <span>Dr(a). Silva</span>
                </div>
            </div>
        </header>

        <div class="prontuarios-container">
            <div class="stats-summary">
                <div class="summary-card">
                    <div class="summary-icon blue">
                        <svg width="24" height="24" ...></svg>
                    </div>
                    <div class="summary-info">
                        <span class="summary-label">Total de Pacientes</span>
                        <span class="summary-value">142</span>
                    </div>
                </div>

                <div class="summary-card">
                    <div class="summary-icon green">
                        <svg width="24" height="24" ...></svg>
                    </div>
                    <div class="summary-info">
                        <span class="summary-label">Prontuários Ativos</span>
                        <span class="summary-value">128</span>
                    </div>
                </div>

                <div class="summary-card">
                    <div class="summary-icon orange">
                        <svg width="24" height="24" ...></svg>
                    </div>
                    <div class="summary-info">
                        <span class="summary-label">Sessões este Mês</span>
                        <span class="summary-value">68</span>
                    </div>
                </div>

                <div class="summary-card">
                    <div class="summary-icon purple">
                        <svg width="24" height="24" ...></svg>
                    </div>
                    <div class="summary-info">
                        <span class="summary-label">Atualizações Hoje</span>
                        <span class="summary-value">8</span>
                    </div>
                </div>
            </div>

            <div class="search-section">
                <div class="search-box">
                    <svg width="20" height="20" ...></svg>
                    <input type="text" id="searchInput" placeholder="Buscar paciente por nome, CPF ou telefone...">
                </div>

                <div class="filter-group">
                    <select class="filter-select" id="filterStatus">
                        <option value="all">Todos Status</option>
                        <option value="active">Em Tratamento</option>
                        <option value="paused">Pausado</option>
                        <option value="completed">Concluído</option>
                    </select>

                    <select class="filter-select" id="filterOrder">
                        <option value="recent">Mais Recentes</option>
                        <option value="name">Nome A-Z</option>
                        <option value="sessions">Mais Sessões</option>
                    </select>
                </div>
            </div>

            <div class="patients-grid" id="patientsGrid"></div>
        </div>
    </div>

    <!-- Modal principal -->
    <div class="modal" id="prontuarioModal">
        <div class="modal-content large">
            <div class="modal-header">
                <div class="modal-title-group">
                    <h3 id="patientName">Prontuário do Paciente</h3>
                    <span class="patient-status-badge" id="patientStatusBadge">Em Tratamento</span>
                </div>

                <button class="modal-close" id="closeProntuarioModal">
                    <svg width="24" height="24" ...></svg>
                </button>
            </div>

            <div class="modal-tabs">
                <button class="modal-tab active" data-tab="info">Informações</button>
                <button class="modal-tab" data-tab="sessions">Sessões</button>
                <button class="modal-tab" data-tab="notes">Anotações</button>
                <button class="modal-tab" data-tab="documents">Documentos</button>
            </div>

            <div class="modal-body" id="prontuarioModalBody"></div>
        </div>
    </div>

    <!-- Modal de sessão -->
    <div class="modal" id="sessionModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Registrar Nova Sessão</h3>

                <button class="modal-close" id="closeSessionModal">
                    <svg width="24" height="24" ...></svg>
                </button>
            </div>

            <div class="modal-body">
                <form id="sessionForm">
                    <div class="form-row">
                        <div class="form-group">
                            <label for="sessionDate">Data da Sessão</label>
                            <input type="date" id="sessionDate" class="form-input" required>
                        </div>

                        <div class="form-group">
                            <label for="sessionDuration">Duração (minutos)</label>
                            <input type="number" id="sessionDuration" class="form-input" value="60" required>
                        </div>
                    </div>

                    <div class="form-group">
                        <label for="sessionType">Tipo de Sessão</label>
                        <select id="sessionType" class="form-input" required>
                            <option value="">Selecione</option>
                            <option value="individual">Terapia Individual</option>
                            <option value="casal">Terapia de Casal</option>
                            <option value="avaliacao">Avaliação Psicológica</option>
                            <option value="retorno">Sessão de Retorno</option>
                            <option value="primeira">Primeira Consulta</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label for="sessionTitle">Título/Tema da Sessão</label>
                        <input type="text" id="sessionTitle" class="form-input" placeholder="Ex: Ansiedade e técnicas de respiração" required>
                    </div>

                    <div class="form-group">
                        <label for="sessionContent">Conteúdo da Sessão</label>
                        <textarea id="sessionContent" class="form-input" rows="6" placeholder="Descreva o que foi trabalhado na sessão..." required></textarea>
                    </div>

                    <div class="form-group">
                        <label for="sessionMood">Estado Emocional do Paciente</label>
                        <select id="sessionMood" class="form-input">
                            <option value="">Selecione</option>
                            <option value="otimo">Ótimo</option>
                            <option value="bem">Bem</option>
                            <option value="neutro">Neutro</option>
                            <option value="ansioso">Ansioso</option>
                            <option value="triste">Triste</option>
                            <option value="irritado">Irritado</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label for="sessionNextSteps">Próximos Passos/Tarefas</label>
                        <textarea id="sessionNextSteps" class="form-input" rows="3" placeholder="Atividades ou exercícios propostos"></textarea>
                    </div>

                    <div class="modal-actions">
                        <button type="submit" class="btn-primary">Salvar Sessão</button>
                        <button type="button" class="btn-secondary" id="cancelSessionBtn">Cancelar</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <div class="toast-container" id="toastContainer"></div>

    <script src="{% static 'users/js/psychologist-record.js' %}"></script>
</body>
</html>
